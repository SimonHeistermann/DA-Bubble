<div class="channel-message">
    <div class="channel-message-left pointer" [class.active]="activeEditChannelButton" #editChannel (click)="openEditChannelOverlay()">
        <span class="tag"></span>
        <span class="channel-name">{{ channel?.name }}</span>
        <span class="arrow-down"></span>
    </div>
    <div class="channel-message-right">
        <div class="logos-number pointer" [class.active]="activeUserListButton" #userList  (click)="openUserListOverlay()">
            <div class="logos">
                <img [src]="currentUser?.photoURL?.startsWith('http') ? '/icons/avatars/avatar_1.png' : currentUser?.photoURL">
                @for (user of allUsers.slice(0, 3); let index = $index; track $index) {
                    <img [src]="user?.photoURL?.startsWith('http') ? '/icons/avatars/avatar_1.png' : user?.photoURL">
                }
            </div>
            <span class="number">{{allUsers.length + 1}}</span>
        </div>
        <button class="add-member pointer" [class.active]="activeAddChannelUserButton" #addMember (click)="openAddChannelUserOverlay()"></button>
    </div>
 </div>


<app-add-channel-user 
    (closeOverlayEmitter)="closeAddChannelUserOverlay()" 
    [showOverlay]="showAddChannelUserOverlay" 
    [currentUser]="currentUser" 
    [allChannelUsers]="allUsers" 
    [currentChannel]="channel">
</app-add-channel-user>


<app-channel-user-list 
    [showOverlay]="showUserListOverlay" 
    (closeOverlayEmitter)="closeUserListOverlay()" 
    (addMemberEmitter)="onAddMemberFromChannelUserList()" 
    [currentUser]="currentUser" 
    [allChannelUsers]="allUsers">
</app-channel-user-list>

<ng-template #editChannelTemplate>
    <app-edit-channel 
    (closeEditChannelOverlayEmitter)="closeEditChannelOverlayByLeavingChannel($event)" 
    [currentChannel]="channel" 
    [currentUser]="currentUser"></app-edit-channel>
</ng-template>